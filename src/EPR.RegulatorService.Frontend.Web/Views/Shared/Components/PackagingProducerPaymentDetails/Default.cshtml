@using EPR.RegulatorService.Frontend.Core.Extensions
@using EPR.RegulatorService.Frontend.Web.Extensions
@using EPR.RegulatorService.Frontend.Web.ViewModels.RegistrationSubmissions
@using System.Globalization
@using EPR.RegulatorService.Frontend.Web.ViewModels.Shared.GovUK
@using EPR.RegulatorService.Frontend.Web.ViewModels.Submissions

@model PackagingProducerPaymentDetailsViewModel
<div class="govuk-summary-card">
    <div class="govuk-summary-card__title-wrapper" style="align-items: center;">
        <h2 class="govuk-summary-card__title">@SharedLocalizer["PaymentDetails.Title"]</h2>
        <ul class="govuk-summary-card__actions">
            <li class="govuk-summary-card__action"></li>
        </ul>
    </div>
    <div class="govuk-summary-card__content" style="padding-bottom: 0px;">
        @if (Model is not null)
        {
            <dl class="govuk-summary-list govuk-!-margin-bottom-4">

                <div class="govuk-summary-list__row" style="display: flex; justify-content: space-between;">
                    <dd class="govuk-summary-list__value" style="width: 285px;">
                        <strong>@SharedLocalizer["PaymentDetails.Items"]</strong>
                    </dd>
                    <dd class="govuk-summary-list__value" style="width: 410px;">
                        <strong>@SharedLocalizer["PaymentDetails.Description"]</strong>
                    </dd>
                    <dd class="govuk-summary-list__actions" style="text-align: right; flex-grow: 1;">
                        <strong>@SharedLocalizer["PaymentDetails.Amount"]</strong>
                    </dd>
                </div>

                <div class="govuk-summary-list__row" style="display: flex; justify-content: space-between;">
                    <dd class="govuk-summary-list__value" style="width: 285px;">
                        <strong>Chargeable items</strong>
                    </dd>
                    @* <dd class="govuk-summary-list__value" style="width: 410px;">
                    </dd> *@
                </div>

                <div class="govuk-summary-list__row" style="display: flex; justify-content: space-between;">
                    <dd class="govuk-summary-list__value" style="width: 285px;">
                        @Localizer["PackagingProducerPaymentDetails.ResubmissionFee"]
                    </dd>
                    <dd class="govuk-summary-list__value" style="width: 410px;">
                        @Localizer["PackagingProducerPaymentDetails.ResubmissionFeeDescription"]
                    </dd>
                    <payment-amount amount="@Model.ResubmissionFee"></payment-amount>
                </div>

                @if (Model.PreviousPaymentsReceived > 0)
                {
                    <div class="govuk-summary-list__row" style="display: flex; justify-content: space-between;">
                        <dd class="govuk-summary-list__value" style="width: 285px;">
                            <strong>@Localizer["ProducerPaymentDetails.PreviousPaymentsReceived"]</strong>
                        </dd>
                        <dd class="govuk-summary-list__value" style="width: 410px;">
                            @Localizer["ProducerPaymentDetails.TotalPaymentsReceived"]
                        </dd>
                        <payment-amount amount="@Model.PreviousPaymentsReceived" property-name="PreviousPaymentsReceived"></payment-amount>
                    </div>
                }

                <div class="govuk-summary-list__row" style="display: flex; justify-content: space-between;">
                    <dd class="govuk-summary-list__value" style="width: 285px;">
                        <strong>@SharedLocalizer["PaymentDetails.TotalOutstanding"]</strong>
                    </dd>
                    <dd class="govuk-summary-list__value" style="width: 410px;"></dd>
                    <payment-amount amount="@Model.TotalOutstanding" property-name="TotalOutstanding"></payment-amount>
                </div>
            </dl>
            <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible" />

            @await Html.PartialAsync("Partials/_ResubmissionOfflinePayment", Model as PaymentDetailsViewModel)
        }
        else
        {
            <p class="govuk-body">Unable to retrieve producer payment details</p>
        }
    </div>
</div>
